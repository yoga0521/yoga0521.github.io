<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>yoga&#39;s blog</title>
  
  <subtitle>you do what you love and fuck the rest.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yoga0521.github.io/"/>
  <updated>2018-04-27T16:21:02.894Z</updated>
  <id>https://yoga0521.github.io/</id>
  
  <author>
    <name>yoga</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Eureka</title>
    <link href="https://yoga0521.github.io/2018/04/14/Eureka-Client/"/>
    <id>https://yoga0521.github.io/2018/04/14/Eureka-Client/</id>
    <published>2018-04-13T16:19:14.000Z</published>
    <updated>2018-04-27T16:21:02.894Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="Spring" scheme="https://yoga0521.github.io/categories/Spring/"/>
    
      <category term="SpringCloud" scheme="https://yoga0521.github.io/categories/Spring/SpringCloud/"/>
    
      <category term="Eureka" scheme="https://yoga0521.github.io/categories/Spring/SpringCloud/Eureka/"/>
    
    
      <category term="Spring" scheme="https://yoga0521.github.io/tags/Spring/"/>
    
      <category term="SpringCloud" scheme="https://yoga0521.github.io/tags/SpringCloud/"/>
    
      <category term="微服务" scheme="https://yoga0521.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis使用Java8的LocalDateTime</title>
    <link href="https://yoga0521.github.io/2017/06/28/MyBatis%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/"/>
    <id>https://yoga0521.github.io/2017/06/28/MyBatis使用Java8的LocalDateTime/</id>
    <published>2017-06-28T13:42:15.000Z</published>
    <updated>2018-04-29T15:27:21.606Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>众所周知，Java8之前的时间API有很多问题，比如：<strong>非线程安全</strong>，<strong>设计很差</strong>。<strong>时区处理麻烦</strong>。新的时间API（<code>java.time</code>包）解决了这些问题，所以我们在平时开发尽可能的使用新的时间API。但是MyBatis使用<code>LocalDataTime</code>映射到数据库的<code>datetime</code>属性时，会报错。</p><a id="more"></a><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><code>mybatis-spring-boot-starter</code>的版本为1.3.1，对应的MyBatis版本为<code>3.4.5</code>（版本低于<code>3.4.0</code>还需要特殊配置）</p><h3 id="将数据保存到数据库"><a href="#将数据保存到数据库" class="headerlink" title="将数据保存到数据库"></a>将数据保存到数据库</h3><ul><li><p>添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- LocalDateTime映射到数据库需要的依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-typehandlers-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 格式化LocalDateTime需要的依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>添加注解，设置时间格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>, locale = <span class="string">"zh"</span>, timezone = <span class="string">"GMT+8"</span>)</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime gmtCreate;</span><br><span class="line">    <span class="comment">//省略get，set方法</span></span><br><span class="line">&#125;​</span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>关于MyBatis使用<code>LocalDateTime</code>的内容就是上面这些了，如果使用的ORM框架式JPA，请点击<a href="https://yoga0521.github.io/2017/06/29/JPA%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/">JPA使用Java8的LocalDateTime</a>。</p><p>欢迎关注博主其他的文章。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;众所周知，Java8之前的时间API有很多问题，比如：&lt;strong&gt;非线程安全&lt;/strong&gt;，&lt;strong&gt;设计很差&lt;/strong&gt;。&lt;strong&gt;时区处理麻烦&lt;/strong&gt;。新的时间API（&lt;code&gt;java.time&lt;/code&gt;包）解决了这些问题，所以我们在平时开发尽可能的使用新的时间API。但是MyBatis使用&lt;code&gt;LocalDataTime&lt;/code&gt;映射到数据库的&lt;code&gt;datetime&lt;/code&gt;属性时，会报错。&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="https://yoga0521.github.io/categories/MyBatis/"/>
    
    
      <category term="MyBatis" scheme="https://yoga0521.github.io/tags/MyBatis/"/>
    
      <category term="Java8" scheme="https://yoga0521.github.io/tags/Java8/"/>
    
  </entry>
  
  <entry>
    <title>JPA使用Java8的LocalDateTime</title>
    <link href="https://yoga0521.github.io/2017/04/29/JPA%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/"/>
    <id>https://yoga0521.github.io/2017/04/29/JPA使用Java8的LocalDateTime/</id>
    <published>2017-04-29T14:49:03.000Z</published>
    <updated>2018-04-29T15:26:39.575Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这篇文章主要介绍JPA如何正确使用<code>LocalDateTime</code>与数据库<code>datetime</code>属性进行映射。</p><a id="more"></a><p>对应的JPA版本是2.1以下的，由于JPA2.1发布时间早于Java8，所以不能直接支持Java8的新特新。<strong>Oracle最新发布的JPA2.2版本是支持新的时间API以及查询结果流等。</strong></p><p><code>MyBatis</code>请查看<a href="https://yoga0521.github.io/2017/06/28/MyBatis%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/">MyBatis使用Java8的LocalDateTime</a>。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><code>spring-boot-starter-data-jpa</code>的版本为<code>1.5.9.RELEASE</code>，对应的<code>hibernate-core</code>版本为<code>5.0.12.Final</code></p><h3 id="将数据保存到数据库"><a href="#将数据保存到数据库" class="headerlink" title="将数据保存到数据库"></a>将数据保存到数据库</h3><ul><li><p>添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-java8<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.12.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>添加注解，在获取<code>LocalDateTime</code>时，指定时间格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"id"</span>, nullable = <span class="keyword">false</span>, length = <span class="number">20</span>)</span><br><span class="line"><span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>, locale = <span class="string">"zh"</span>, timezone = <span class="string">"GMT+8"</span>)</span><br><span class="line"><span class="meta">@Column</span>(name = <span class="string">"gmt_create"</span>)</span><br><span class="line"><span class="keyword">private</span> LocalDateTime gmtCreate;</span><br><span class="line">    <span class="comment">//省略get，set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>博主一开始遇到了一个坑，我用的<code>hibernate-java8</code>版本为<code>5.2.8.Final</code>，结果报错了。后来发现这个版本的<code>hibernate-core</code>是<code>5.2.8.Final</code>。后来改成对应的<code>5.0.12.Final</code>就正确了。</p><p>欢迎关注博主其他的文章。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;这篇文章主要介绍JPA如何正确使用&lt;code&gt;LocalDateTime&lt;/code&gt;与数据库&lt;code&gt;datetime&lt;/code&gt;属性进行映射。&lt;/p&gt;
    
    </summary>
    
      <category term="JPA" scheme="https://yoga0521.github.io/categories/JPA/"/>
    
    
      <category term="Java8" scheme="https://yoga0521.github.io/tags/Java8/"/>
    
      <category term="JPA" scheme="https://yoga0521.github.io/tags/JPA/"/>
    
  </entry>
  
</feed>
