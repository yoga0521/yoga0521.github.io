<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>yoga&#39;s blog</title>
  
  <subtitle>you do what you love and fuck the rest.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yoga0521.github.io/"/>
  <updated>2018-04-27T16:21:02.894Z</updated>
  <id>https://yoga0521.github.io/</id>
  
  <author>
    <name>yoga</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Eureka</title>
    <link href="https://yoga0521.github.io/2018/04/14/Eureka-Client/"/>
    <id>https://yoga0521.github.io/2018/04/14/Eureka-Client/</id>
    <published>2018-04-13T16:19:14.000Z</published>
    <updated>2018-04-27T16:21:02.894Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="Spring" scheme="https://yoga0521.github.io/categories/Spring/"/>
    
      <category term="SpringCloud" scheme="https://yoga0521.github.io/categories/Spring/SpringCloud/"/>
    
      <category term="Eureka" scheme="https://yoga0521.github.io/categories/Spring/SpringCloud/Eureka/"/>
    
    
      <category term="Spring" scheme="https://yoga0521.github.io/tags/Spring/"/>
    
      <category term="SpringCloud" scheme="https://yoga0521.github.io/tags/SpringCloud/"/>
    
      <category term="微服务" scheme="https://yoga0521.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis使用Java8的LocalDateTime</title>
    <link href="https://yoga0521.github.io/2017/06/28/MyBatis%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/"/>
    <id>https://yoga0521.github.io/2017/06/28/MyBatis使用Java8的LocalDateTime/</id>
    <published>2017-06-28T13:42:15.000Z</published>
    <updated>2018-04-29T05:56:17.104Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>众所周知，Java8之前的时间API有很多问题，比如：<strong>非线程安全</strong>，<strong>设计很差</strong>。<strong>时区处理麻烦</strong>。新的时间API（<code>java.time</code>包）解决了这些问题，所以我们在平时开发尽可能的使用新的时间API。但是MyBatis使用<code>LocalDataTime</code>映射到数据库的<code>datetime</code>属性时，会报错。</p><a id="more"></a><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><code>mybatis-spring-boot-starter</code>的版本为1.3.1，对应的mybatis版本为3.4.5（版本低于3.4.0还需要特殊配置）</p><h3 id="将数据保存到数据库"><a href="#将数据保存到数据库" class="headerlink" title="将数据保存到数据库"></a>将数据保存到数据库</h3><ul><li><p>添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-typehandlers-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>将对象的时间字段改为LocalDateTime</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime gmtCreate;</span><br><span class="line">    <span class="comment">//省略get，set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="从数据库获取数据"><a href="#从数据库获取数据" class="headerlink" title="从数据库获取数据"></a>从数据库获取数据</h3><ul><li><p>添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​</p></li><li><p>添加注解，设置时间格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>, locale = <span class="string">"zh"</span>, timezone = <span class="string">"GMT+8"</span>)</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime gmtCreate;</span><br><span class="line">    <span class="comment">//省略get，set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>关于MyBatis使用LocalDateTime的内容就是上面这些了，如果使用的ORM框架式JPA，<a href="http://localhost:4000/2017/06/28/MyBatis%E4%BD%BF%E7%94%A8Java8%E7%9A%84LocalDateTime/" target="_blank" rel="noopener">请查看关于JPA使用LocalDateTime的文章</a>。</p><p>欢迎关注博主其他的文章。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;众所周知，Java8之前的时间API有很多问题，比如：&lt;strong&gt;非线程安全&lt;/strong&gt;，&lt;strong&gt;设计很差&lt;/strong&gt;。&lt;strong&gt;时区处理麻烦&lt;/strong&gt;。新的时间API（&lt;code&gt;java.time&lt;/code&gt;包）解决了这些问题，所以我们在平时开发尽可能的使用新的时间API。但是MyBatis使用&lt;code&gt;LocalDataTime&lt;/code&gt;映射到数据库的&lt;code&gt;datetime&lt;/code&gt;属性时，会报错。&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="https://yoga0521.github.io/categories/MyBatis/"/>
    
    
      <category term="MyBatis" scheme="https://yoga0521.github.io/tags/MyBatis/"/>
    
      <category term="Java8" scheme="https://yoga0521.github.io/tags/Java8/"/>
    
  </entry>
  
</feed>
